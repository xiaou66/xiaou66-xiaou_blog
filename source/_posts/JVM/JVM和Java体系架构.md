---
title: JVM和Java体系架构
date: 2022/01/11 20:25:02
math: true
categories:
  - [JVM]
tags:
  - [java]
---
# JVM和Java体系架构

##  内存结构概述

![image-20220112123403456](https://fastly.jsdelivr.net/gh/xiaou66/picture@master/image/1646538232141image-20220112123403456.png)


## JVM的位置

 JVM 介于**操作系统**和**字节码文件**的中间。

 ![image-20220111203102222](https://fastly.jsdelivr.net/gh/xiaou66/picture@master/image/1646538236132image-20220111203102222.png)

## JVM的整体结构

1. `HotSpot VM` 是市面上性能最高虚拟机的代表作之一
2. 采用解释器与即时编译器并存的架构
3. 执行引擎包含三部分：**解释器**，**即时编译器**，**垃圾回收器**

 ![image-20220111204826164](https://fastly.jsdelivr.net/gh/xiaou66/picture@master/image/1646538240139image-20220111204826164.png)

## Java代码执行流程

![image-20220111205949349](https://fastly.jsdelivr.net/gh/xiaou66/picture@master/image/1646538244133image-20220111205949349.png)

## JVM架构模型

Java编译器输入的指令流基本上是一种`基于栈的指令集架构`，另外一种指令集架构则是`基于寄存器的指令集架构`。具体来说：这两种架构之间的区别：

- 基于栈式架构的特点
  1. 设计和实现更简单，适用于资源受限的系统
  2. 避开了寄存器的分配难题：使用零地址指令方式分配
  3. 指令流中的指令大部分是零地址指令，其执行过程依赖于`操作栈`。`指令集更小，编译器容易实现`
  4. 不需要硬件支持，可移植性更好，更好`实现跨平台`

- 基于寄存器架构的特点
      1. 典型的应用是x86的二进制指令集：比如传统的PC以及Android的Davlik虚拟机。
      1. 指令集架构则`完全依赖硬件`，与硬件的耦合度高，`可移植性差`
      1. **性能优秀和执行更高效**
      1. 花费更少的指令去完成一项操作
      1. 在大部分情况下，`基于寄存器架构的指令集往往都以一地址指令、二地址指令和三地址指令为主`，而基于栈式架构的指令集却是以零地址指令为主